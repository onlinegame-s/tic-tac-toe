!function(s){var u={},a="doTimeout",p=Array.prototype.slice;function o(e){var t,a=this,o={},l=e?s.fn:s,n=arguments,r=4,m=n[1],c=n[2],i=n[3];function g(){e?t.removeData(e):m&&delete u[m]}function d(){o.id=setTimeout(function(){o.fn()},c)}if("string"!=typeof m&&(r--,m=e=0,c=n[1],i=n[2]),e?(t=a.eq(0)).data(e,o=t.data(e)||{}):m&&(o=u[m]||(u[m]={})),o.id&&clearTimeout(o.id),delete o.id,i)o.fn=function(e){"string"==typeof i&&(i=l[i]),(!0!==i.apply(a,p.call(n,r))||e?g:d)()},d();else{if(o.fn)return void 0===c?g():o.fn(!1===c),!0;g()}}s[a]=function(){return o.apply(window,[0].concat(p.call(arguments)))},s.fn[a]=function(){var e=p.call(arguments),t=o.apply(this,[a+e[0]].concat(e));return"number"==typeof e[0]||"number"==typeof e[1]?this:t}}(jQuery);let player1Wins=null!==localStorage.getItem("p1w")&&void 0!==localStorage.getItem("p1w")?localStorage.getItem("p1w"):0,player1WinsVSComp=null!==localStorage.getItem("p1wc")&&void 0!==localStorage.getItem("p1wc")?localStorage.getItem("p1wc"):0,player2Wins=null!==localStorage.getItem("p2w")&&void 0!==localStorage.getItem("p2w")?localStorage.getItem("p2w"):0,computerWins=null!==localStorage.getItem("cw")&&void 0!==localStorage.getItem("cw")?localStorage.getItem("cw"):0;var pauseForAnimate=800,pauseForSound=200,startPlayer=1,currentPlayer=1,gameOver=!1,MOVES=0;gtag("event","main_game_page_view");var gm=null!==localStorage.getItem("gm")&&void 0!==localStorage.getItem("gm")?localStorage.getItem("gm"):2,gmd=null!==localStorage.getItem("gmd")&&void 0!==localStorage.getItem("gmd")?localStorage.getItem("gmd"):1;$("#mode option[value="+gm+"]").attr("selected",!0),$("#diff-mode option[value="+gmd+"]").attr("selected",!0);var handlerModeText="";$("#handlerDiff").show(),1==gm&&(handlerModeText='<img src="https://onlinegame-s.github.io/tic-tac-toe/img/player.svg"  height="35" width="35" title = "'+localAltPVP+'" alt = "'+localAltPVP+'">',$("#handlerDiff").hide()),2==gm&&(handlerModeText='<img src="https://onlinegame-s.github.io/tic-tac-toe/img/comp.svg"  height="35" width="35" title = "'+localAltPVC+'" alt = "'+localAltPVC+'">'),3==gm&&(handlerModeText='<img src="https://onlinegame-s.github.io/tic-tac-toe/img/comp.svg"  height="35" width="35" title = "'+localAltPVCWP+'" alt = "'+localAltPVCWP+'"><img  height="35" width="35" src="https://onlinegame-s.github.io/tic-tac-toe/img/random.svg" alt = "'+localAltPVCWP+'" title = "'+localAltPVCWP+'">'),$("#handlerMode").html(handlerModeText),$("#handlerDiff").text($("#diff-mode option[value="+gmd+"]").text());var gameMode=1;function switchPlayer(){playerName=1===(currentPlayer=1===currentPlayer?2:1)?player1Name:player2Name,$(".message").text(playerName+whosturn)}function switchStartPlayer(){playerName=1===(startPlayer=1===startPlayer?2:1)?player1Name:player2Name,$(".message").text(letsgo+" "+playerName+whosturn)}function checkForWinner(){$(".cell").removeClass("winners"),$(".cell").removeClass("loosers");for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],t=0;t<e.length;t++){var a=e[t];if(""!==$(".cell").eq(a[0]).text()&&$(".cell").eq(a[0]).text()===$(".cell").eq(a[1]).text()&&$(".cell").eq(a[1]).text()===$(".cell").eq(a[2]).text())return $(".cell").each(function(e){a.includes(e)?$(this).addClass("winners"):$(this).addClass("loosers")}),$.each(a,function(e,t){}),$(".cell").eq(a[0]).text()}return null}function randomInRangeFull(e,t){return Math.floor(e+Math.random()*(t+1-e))}2==gm&&1==gmd&&(gameMode=2),2==gm&&2==gmd&&(gameMode=3),2==gm&&3==gmd&&(gameMode=4),3==gm&&1==gmd&&(gameMode=5),3==gm&&2==gmd&&(gameMode=6),3==gm&&3==gmd&&(gameMode=7);var confettiMode=1,confettiCount=1,stagingConfetti=3;function makeMove(e){e.text(1===currentPlayer?"X":"O").addClass("cell"+(1===currentPlayer?"X":"O").toString()),(1===currentPlayer?document.getElementById("music-x"):document.getElementById("music-o")).play(),e.off("click");var t=checkForWinner();if(null!==t){var a=!(gameOver=!0),e=1===currentPlayer?player1Name:player2Name;if([2,3,4,5,6,7].includes(gameMode)?"X"==t?(a=!0,player1WinsVSComp++):(e=computer,computerWins++):("X"==t?player1Wins++:player2Wins++,a=!0),switchPlayer(),localStorage.setItem("p1w",player1Wins),localStorage.setItem("p1wc",player1WinsVSComp),localStorage.setItem("p2w",player2Wins),localStorage.setItem("cw",computerWins),a){const r={spread:100,ticks:50,gravity:7.7,decay:.94,startVelocity:130,shapes:["star"],origin:{y:.6},colors:["FFE400","FFBD00","E89400","FFCA6C","FDFFB8"]};function o(){confetti({...r,angle:randomInRangeFull(40,140),particleCount:30,scalar:1.2,shapes:["star"]}),confetti({...r,angle:randomInRangeFull(40,140),particleCount:30,scalar:.75,shapes:["circle"]})}function l(){confetti({gravity:5.7,angle:randomInRangeFull(40,140),spread:randomInRangeFull(50,70),scalar:1.2,particleCount:30,particleCount:randomInRangeFull(50,100),origin:{y:.6}})}function n(){var t=Date.now()+250,a={startVelocity:30,spread:360,ticks:60,zIndex:0,shapes:["star"],gravity:9.7,particleCount:30};const o=setInterval(function(){var e=t-Date.now();if(e<=0)return clearInterval(o);e=e/250*40;confetti(Object.assign({},a,{particleCount:e,origin:{x:randomInRangeFull(.1,.3),y:Math.random()-.2}})),confetti(Object.assign({},a,{particleCount:e,origin:{x:randomInRangeFull(.7,.9),y:Math.random()-.2}}))},100)}if(confettiShow=(Number(player1Wins)+Number(player2Wins)+Number(player1WinsVSComp))%stagingConfetti,confettiMode=Math.floor((Number(player1Wins)+Number(player2Wins)+Number(player1WinsVSComp))/stagingConfetti),0==confettiShow||Number(player1Wins)+Number(player2Wins)+Number(player1WinsVSComp)==1)for(let e=0;e<4;e++)switch(confettiMode%3){case 0:setTimeout(n,150*e);break;case 1:setTimeout(l,150*e);break;case 2:e%2==0&&setTimeout(o,150*e);break;default:setTimeout(l,150*e)}}reloadCounters(),showModal(e+" "+wins),$.doTimeout(pauseForSound,function(){(a?document.getElementById("music-win"):document.getElementById("music-lose")).play(),$("#reset-button").addClass("pushme"),tryOneMoreTime()})}else 0===$(".cell:empty").length?(gameOver=!0,showModal(tie),tryOneMoreTime(),$.doTimeout(pauseForSound,function(){document.getElementById("music-tie").play(),$("#reset-button").addClass("pushme")})):(switchPlayer(),2===currentPlayer&&(2!==gameMode&&5!==gameMode||($(".game-board").addClass("not_active"),$.doTimeout(pauseForAnimate,function(){makeComputerMoveEasy(),$(".game-board").removeClass("not_active")})),3===gameMode&&($(".game-board").addClass("not_active"),$.doTimeout(pauseForAnimate,function(){makeComputerMoveMedium(),$(".game-board").removeClass("not_active")})),4===gameMode&&($(".game-board").addClass("not_active"),$.doTimeout(pauseForAnimate,function(){makeComputerMoveHard(),$(".game-board").removeClass("not_active")})),6===gameMode&&(8==$(".cell:empty").length?makeComputerMoveEasy():($(".game-board").addClass("not_active"),$.doTimeout(pauseForAnimate,function(){makeComputerMoveMedium(),$(".game-board").removeClass("not_active")}))),7===gameMode&&(8==$(".cell:empty").length?makeComputerMoveEasy():($(".game-board").addClass("not_active"),$.doTimeout(pauseForAnimate,function(){makeComputerMoveHard(),$(".game-board").removeClass("not_active")})))))}function makeComputerMoveEasy(){var e=$(".cell:empty"),t=Math.floor(Math.random()*e.length);makeMove(e.eq(t))}function makeComputerMoveHard(){console.log("move hard");for(var e=$(".cell:empty"),t=0;t<e.length;t++){if(e.eq(t).text("O"),"O"===checkForWinner())return void makeMove(e.eq(t));e.eq(t).text("")}for(var a,o,t=0;t<e.length;t++){if(e.eq(t).text("X"),"X"===checkForWinner())return void makeMove(e.eq(t));e.eq(t).text("")}""!==$(".cell").eq(4).text()?0<(a=$.grep([0,2,6,8],function(e){return""===$(".cell").eq(e).text()})).length?(o=Math.floor(Math.random()*a.length),makeMove($(".cell").eq(a[o]))):(a=$.grep([1,3,5,7],function(e){return""===$(".cell").eq(e).text()}),o=Math.floor(Math.random()*a.length),makeMove($(".cell").eq(a[o]))):makeMove($(".cell").eq(4))}function makeComputerMoveMedium(){for(var e=$(".cell:empty"),t=0;t<e.length;t++){if(e.eq(t).text("O"),"O"===checkForWinner())return void makeMove(e.eq(t));e.eq(t).text("")}for(t=0;t<e.length;t++){if(e.eq(t).text("X"),"X"===checkForWinner())return void makeMove(e.eq(t));e.eq(t).text("")}var a,o=$.grep([0,2,6,8],function(e){return""===$(".cell").eq(e).text()});0<o.length?(a=Math.floor(Math.random()*o.length),makeMove($(".cell").eq(o[a]))):""!==$(".cell").eq(4).text()?(o=$.grep([1,3,5,7],function(e){return""===$(".cell").eq(e).text()}),a=Math.floor(Math.random()*o.length),makeMove($(".cell").eq(o[a]))):makeMove($(".cell").eq(4))}function resetGame(){MOVES=0,$("#reload").remove(),gameOver=!1,$("#reset-button").removeClass("pushme"),$(".cell").text(""),$(".cell").click(function(){1==++MOVES&&gtag("event","main_game_start_game"),gameOver||""!==$(this).text()||makeMove($(this))}),[2,3,4,5,6,7].includes(gameMode)?(player2Name=computer,$("#namePlayer2").hide()):($("#namePlayer2").show(),player2Name=null!==localStorage.getItem("p2n")&&""!==localStorage.getItem("p2n")?localStorage.getItem("p2n"):player2),$(".cell").removeClass("cellX").removeClass("cellO"),switchStartPlayer(),currentPlayer=startPlayer,[5,6,7].includes(gameMode)&&(startedPlayer=currentPlayer=1,currentPlayer=startPlayer),[2].includes(gameMode)&&2==currentPlayer||[3].includes(gameMode)&&2==currentPlayer||[4].includes(gameMode)&&2==currentPlayer?makeComputerMoveEasy():(5===gameMode&&makeComputerMoveEasy(),6===gameMode&&makeComputerMoveEasy(),7===gameMode&&makeComputerMoveHard())}function resetCounters(){localStorage.setItem("p1w",0),localStorage.setItem("p1wc",0),localStorage.setItem("p2w",0),localStorage.setItem("cw",0),player1Wins=0,player1WinsVSComp=0,player2Wins=0,computerWins=0}function initGame(){[2,3,4,5,6,7].includes(parseInt(gameMode))?($(".counters>div:nth-child(2)").hide(),$(".counters>div:nth-child(3)").show()):($(".counters>div:nth-child(2)").show(),$(".counters>div:nth-child(3)").hide()),[5,6,7].includes(gameMode)&&(startedPlayer=currentPlayer=1,currentPlayer=startPlayer),5===gameMode&&makeComputerMoveEasy(),6===gameMode&&makeComputerMoveMedium(),7===gameMode&&makeComputerMoveHard(),[2,3,4,5,6,7].includes(gameMode)?$("#namePlayer2").hide():$("#namePlayer2").show(),player1Name=null!==localStorage.getItem("p1n")&&""!==localStorage.getItem("p1n")?localStorage.getItem("p1n"):player1,player2Name=null!==localStorage.getItem("p2n")&&""!==localStorage.getItem("p2n")?localStorage.getItem("p2n"):player2,null===localStorage.getItem("p1n")&&null===localStorage.getItem("p2n")||($(".p1name").html(player1Name+"<br/> (X)"),$(".p2name").html(player2Name+"<br/> (O)")),$(".compname").html(computer+"<br/> (O)"),playerName=1===currentPlayer?player1Name:player2Name,$(".message").text(letsgo+" "+playerName+whosturn),reloadCounters()}function reloadCounters(){[2,3,4,5,6,7].includes(gameMode)?$(".counters .p1w").html((null!==localStorage.getItem("p1wc")&&void 0!==localStorage.getItem("p1wc")?localStorage.getItem("p1wc"):0).toString()):$(".counters .p1w").html((null!==localStorage.getItem("p1w")&&void 0!==localStorage.getItem("p1w")?localStorage.getItem("p1w"):0).toString()),$(".counters .p2w").html((null!==localStorage.getItem("p2w")&&void 0!==localStorage.getItem("p2w")?localStorage.getItem("p2w"):0).toString()),$(".counters .cw").html((null!==localStorage.getItem("cw")&&void 0!==localStorage.getItem("cw")?localStorage.getItem("cw"):0).toString())}function showModal(e){$(".message").text(e)}function tryOneMoreTime(){gtag("event","main_game_finish_game"),$("#reload").remove(),$('<div id="reload"><img src="https://onlinegame-s.github.io/tic-tac-toe/img/restart.svg" title="'+$("#reset-button img").attr("alt")+'" alt="'+$("#reset-button img").attr("alt")+'"></div>').insertBefore(".game-mode"),$("#reload").height($(".game-board table").outerHeight()+40),$("#reload").on("click",function(){resetGame()})}$(".cell").click(function(){1==++MOVES&&gtag("event","main_game_start_game"),gameOver||""!==$(this).text()||makeMove($(this))}),$("#mode, #diff-mode").change(function(){var e=$("#mode").val(),t=$("#diff-mode").val();1==e&&(gameMode=1),2==e&&1==t&&(gameMode=2),2==e&&2==t&&(gameMode=3),2==e&&3==t&&(gameMode=4),3==e&&1==t&&(gameMode=5),3==e&&2==t&&(gameMode=6),3==e&&3==t&&(gameMode=7),localStorage.setItem("gm",e),localStorage.setItem("gmd",t),[2,3,4,5,6,7].includes(parseInt(gameMode))?($(".counters>div:nth-child(2)").hide(),$(".counters>div:nth-child(3)").show()):($(".counters>div:nth-child(2)").show(),$(".counters>div:nth-child(3)").hide()),reloadCounters(),resetGame()}),$("#reset-button").click(function(){$("#reset-button").removeClass("pushme"),resetGame()}),$("#reset-names").click(function(){showModalStart()}),$("#reset-counter").click(function(){resetCounters(),reloadCounters()}),$("#handlerMode").click(function(){var e=$("#mode").val();3==e?e=1:e++,$("#mode").val(e).trigger("change");var t="";$("#handlerDiff").show(),1==e&&(t='<img  height="35" width="35" src="https://onlinegame-s.github.io/tic-tac-toe/img/player.svg" title = "'+localAltPVP+'"  alt="'+localAltPVP+'">',$("#handlerDiff").hide()),2==e&&(t='<img  height="35" width="35" src="https://onlinegame-s.github.io/tic-tac-toe/img/comp.svg" title = "'+localAltPVC+'" alt="'+localAltPVC+'">'),3==e&&(t='<img  height="35" width="35" src="https://onlinegame-s.github.io/tic-tac-toe/img/comp.svg" title = "'+localAltPVCWP+'" alt = "'+localAltPVCWP+'"><img  height="35" width="35" src="https://onlinegame-s.github.io/tic-tac-toe/img/random.svg" alt = "'+localAltPVCWP+'" title = "'+localAltPVCWP+'">'),$("#handlerMode").html(t)}),$("#handlerDiff").click(function(){var e=$("#diff-mode").val();3==e?e=1:e++,$("#handlerDiff").text($("#diff-mode option[value="+e+"]").text()),$("#diff-mode").val(e).trigger("change")}),initGame();var playAgainButton=document.getElementById("play-again");function showModalStart(){document.getElementById("modal-start").style.display="flex",$("input[name=namePlayer1]").val(null!==localStorage.getItem("p1n")&&void 0!==localStorage.getItem("p1n")?localStorage.getItem("p1n"):""),$("input[name=namePlayer2]").val(null!==localStorage.getItem("p2n")&&void 0!==localStorage.getItem("p2n")?localStorage.getItem("p2n"):"")}playAgainButton.addEventListener("click",function(){document.getElementById("modal").style.display="none",$("#reset-button").click()});var sendNames=document.getElementById("send-names");sendNames.addEventListener("click",function(){""===$("input[name=namePlayer1]").val()&&""===localStorage.getItem("p1n")||localStorage.setItem("p1n",$("input[name=namePlayer1]").val()),""===$("input[name=namePlayer2]").val()&&""===localStorage.getItem("p2n")||localStorage.setItem("p2n",$("input[name=namePlayer2]").val()),document.getElementById("modal-start").style.display="none",initGame()});var mute=document.getElementById("mute");function sleep(e){for(var t,a=Date.now();t=Date.now(),t-a<e;);}1==localStorage.getItem("mute")&&(document.getElementById("music-move").volume=0,document.getElementById("music-tie").volume=0,document.getElementById("music-win").volume=0,document.getElementById("music-lose").volume=0,document.getElementById("music-x").volume=0,document.getElementById("music-o").volume=0,$("#mute img").attr("src","https://onlinegame-s.github.io/tic-tac-toe/img/muteoff.svg")),mute.addEventListener("click",function(){1==localStorage.getItem("mute")?(localStorage.setItem("mute",0),document.getElementById("music-move").volume=1,document.getElementById("music-tie").volume=1,document.getElementById("music-win").volume=1,document.getElementById("music-lose").volume=1,document.getElementById("music-x").volume=1,document.getElementById("music-o").volume=1,$("#mute img").attr("src","https://onlinegame-s.github.io/tic-tac-toe/img/mute.svg")):(localStorage.setItem("mute",1),document.getElementById("music-move").volume=0,document.getElementById("music-tie").volume=0,document.getElementById("music-win").volume=0,document.getElementById("music-lose").volume=0,document.getElementById("music-x").volume=0,document.getElementById("music-o").volume=0,$("#mute img").attr("src","https://onlinegame-s.github.io/tic-tac-toe/img/muteoff.svg"))});
